<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Golf Course Status</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f6f7f8;
      margin: 0;
      padding: 16px;
    }

    .card {
      background: #ffffff;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    h1, h2 {
      margin: 0 0 8px 0;
    }

   .status {
  font-weight: 600;
  padding: 6px 14px;
  border-radius: 999px;
  display: inline-block;
  font-size: 14px;
}

/* OPEN */
.status-open {
  background: #e6f4ea;
  color: #137333;
}

/* CLOSED */
.status-closed {
  background: #fce8e6;
  color: #a50e0e;
}

/* DELAY / FROST */
.status-delay {
  background: #fef7e0;
  color: #b06000;
}



    ul {
      padding-left: 18px;
    }

    li {
      margin-bottom: 6px;
    }

    .muted {
      color: #666;
      font-size: 14px;
    }
  </style>
</head>

<body>

  <!-- COURSE HEADER -->
  <div class="card">
    <h1 id="course-name">Loading…</h1>
    <div id="course-status" class="status">Loading…</div>
    <p id="front-pace">Front 9: —</p>
    <p id="back-pace">Back 9: —</p>
    <p id="last-updated" class="muted">Last updated: —</p>
  </div>

  <!-- COURSE NOTICES -->
  <div class="card">
    <h2>Course Notices</h2>
    <ul id="course-notices">
      <li>Loading notices…</li>
    </ul>
  </div>

  <!-- PIN PLACEMENTS -->
  <div class="card">
    <h2>Today’s Pin Placements</h2>
    <ul id="pin-placements">
      <li>Loading pin placements…</li>
    </ul>
  </div>

<script>
const SHEET_ID = "1_Bd5eS7UCABFjMFaDznX5kbEzEIzB7umFegd9m1IKos";

function fetchSheet(sheetName) {
  const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${sheetName}`;
  return fetch(url)
    .then(res => res.text())
    .then(text => JSON.parse(text.substring(47).slice(0, -2)))
    .catch(err => {
      console.error(`Error loading ${sheetName}`, err);
      return null;
    });
}

/* ================= COURSE SETTINGS ================= */

fetchSheet("Course_Settings").then(data => {
  if (!data || !data.table.rows.length) return;

  const row = data.table.rows[0].c;

  document.getElementById("course-name").textContent = row[0]?.v ?? "—";
 const statusText = row[1]?.v ?? "—";
const statusEl = document.getElementById("course-status");

statusEl.textContent = statusText;
statusEl.className = "status";

// SAFE lowercase conversion
const s = String(statusText).toLowerCase();

if (s.includes("closed")) {
  statusEl.classList.add("status-closed");
} else if (s.includes("delay") || s.includes("frost")) {
  statusEl.classList.add("status-delay");
} else {
  statusEl.classList.add("status-open");
}


  document.getElementById("front-pace").textContent = `Front 9: ${row[2]?.v ?? "—"}`;
  document.getElementById("back-pace").textContent = `Back 9: ${row[3]?.v ?? "—"}`;
  document.getElementById("last-updated").textContent = `Last updated: ${row[4]?.f ?? "—"}`;
});

/* ================= COURSE NOTICES ================= */

fetchSheet("Course_Notice").then(data => {
  const list = document.getElementById("course-notices");
  list.innerHTML = "";

  if (!data) {
    list.innerHTML = "<li>Error loading notices</li>";
    return;
  }

  data.table.rows.forEach(r => {
    const active = r.c[0]?.v;
    const message = r.c[1]?.v;

    if (active === true || active === "TRUE" || active === 1) {
      if (message) {
        const li = document.createElement("li");
        li.textContent = message;
        list.appendChild(li);
      }
    }
  });

  if (!list.children.length) {
    list.innerHTML = "<li>No active notices today</li>";
  }
});

/* ================= PIN PLACEMENTS ================= */

fetchSheet("Pin_Placements").then(data => {
  const list = document.getElementById("pin-placements");
  list.innerHTML = "";

  if (!data) {
    list.innerHTML = "<li>Error loading pin placements</li>";
    return;
  }

  data.table.rows.forEach(r => {
    const hole = r.c[0]?.v;
    const position = r.c[1]?.v;
    const detail = r.c[2]?.v;

    if (!hole || !position) return;

    const li = document.createElement("li");
    li.textContent = `Hole ${hole}: ${position}${detail ? " – " + detail : ""}`;
    list.appendChild(li);
  });

  if (!list.children.length) {
    list.innerHTML = "<li>No pin placements posted</li>";
  }
});
</script>
  // Auto refresh every 2 minutes
setInterval(() => {
  location.reload();
}, 120000);


</body>
</html>














